(this["webpackJsonpreact-auth-client-done-v2"]=this["webpackJsonpreact-auth-client-done-v2"]||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(37),c=a.n(o),s=(a(47),a(26),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=a(1),u=a(2),m=a(4),d=a(3),h=a(5),p=a(7),g=(a(49),a(15)),f=a(10),b=a(6),v=a.n(b),E=new(function(){function e(){Object(l.a)(this,e),this.auth=v.a.create({baseURL:"https://exhibit-me.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"signup",value:function(e){var t=e.username,a=e.password,n=e.email,r=e.theme,o=e.space_name;return this.auth.post("/auth/signup",{username:t,password:a,email:n,theme:r,space_name:o}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/login",{username:t,password:a}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),y=r.a.createContext(),w=y.Consumer,C=y.Provider,j=function(e){return function(t){function a(){return Object(l.a)(this,a),Object(m.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(h.a)(a,t),Object(u.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(w,null,(function(a){var n=a.login,o=a.signup,c=a.user,s=a.logout,i=a.isLoggedin,l=a.isLoading;return r.a.createElement(e,Object.assign({login:n,signup:o,user:c,logout:s,isLoggedin:i,isLoading:l},t.props))}))}}]),a}(r.a.Component)},k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedin:!1,user:null,isLoading:!0},a.signup=function(e){var t=e.username,n=e.password,r=e.email,o=e.theme,c=e.space_name;E.signup({username:t,password:n,email:r,theme:o,space_name:c}).then((function(e){return a.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},a.login=function(e){var t=e.username,n=e.password;E.login({username:t,password:n}).then((function(e){return a.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},a.logout=function(){E.logout().then((function(){return a.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedin,n=e.user,o=this.login,c=this.logout,s=this.signup;return r.a.createElement(C,{value:{isLoading:t,isLoggedin:a,user:n,login:o,logout:c,signup:s}},this.props.children)}}]),t}(r.a.Component),O=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",space_name:"",theme:"",email:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password,o=t.space_name,c=t.theme,s=t.email;a.props.signup({username:n,password:r,space_name:o,theme:c,email:s})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.space_name,o=e.theme,c=e.email;return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.04)",padding:"7vh 0"}},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit,id:"sign-up"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",value:c,onChange:this.handleChange}),r.a.createElement("label",null,"Theme:"),r.a.createElement("select",{value:o,name:"theme",id:"theme",onChange:this.handleChange,style:{width:"12%",height:"95%",margin:"1vh auto"}},r.a.createElement("option",{id:"selected",value:"pick"},"Pick a theme"),r.a.createElement("option",{id:"selected",value:"bali"},"Bali"),r.a.createElement("option",{id:"selected",value:"nature"},"Nature"),r.a.createElement("option",{id:"selected",value:"grass"},"Grass"),r.a.createElement("option",{id:"selected",value:"trippy"},"Trippy"),r.a.createElement("option",{id:"selected",value:"festival"},"Festival"),r.a.createElement("option",{id:"selected",value:"winter"},"Winter"),r.a.createElement("option",{id:"selected",value:"mountains"},"Mountains"),r.a.createElement("option",{id:"selected",value:"canyon"},"Canyon")),r.a.createElement("label",null,"Name Your 3D Space:"),r.a.createElement("input",{type:"text",name:"space_name",value:n,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{style:{width:"8%",margin:"1.5vh auto",backgroundColor:"#2ab193e5"},type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(f.b,{to:"/login"}," Login")))}}]),t}(n.Component)),S=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.login({username:n,password:r})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.04)",paddingBottom:"50vh",paddingTop:"20vh"}},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit,id:"log-in"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{style:{width:"50%",margin:"4vh auto",backgroundColor:"#2ab193e5"},type:"submit",value:"Login"}))))}}]),t}(n.Component)),x=a(8),L=a.n(x),N=(a(36),a(18)),A=(a(22),j(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).getUser=function(){var e=a.state.userId;v.a.get("".concat("https://exhibit-me.herokuapp.com","/users/").concat(e)).then((function(e){var t=e.data;a.setState({theme:t.theme,backgroundPath:"images/".concat(a.props.theme,".jpg")})})).catch((function(e){console.log(e)}))},a.upload=function(){var e,t,n;return L.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(e=document.createElement("img")).setAttribute("id","sky"),e.setAttribute("src","images/".concat(a.props.theme,".jpg")),t=document.createElement("a-sky"),n=document.getElementById("scene"),t.setAttribute("src","#sky"),t.appendChild(e),n.appendChild(t);case 8:case"end":return r.stop()}}))},a.startVR=function(){var e;return L.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a.setState({isLoaded:!0}),(e=document.getElementById("startbtn")).parentNode&&e.parentNode.removeChild(e),t.next=5,L.a.awrap(a.props.getFile());case 5:return t.next=7,L.a.awrap(a.upload());case 7:case"end":return t.stop()}}))},a.state={userId:a.props.user._id,backgroundPath:"",theme:"",isLoaded:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.isLoaded;return r.a.createElement("div",{className:"vrscene"},r.a.createElement("div",Object(g.a)({id:"start"},"id","myEmbeddedScene"),r.a.createElement("button",{id:"startbtn",style:{color:"white",border:"none",margin:"12em auto",fontSize:"20px"},onClick:this.startVR},"CLICK TO START"),e?r.a.createElement(N.Scene,{id:"scene",embedded:!0},r.a.createElement("a-camera",{position:"40 70 0"})):null))}}]),t}(n.Component))),_=a(39),D=a.n(_),B=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],selected:[],themes:[],background:"",selectedThemes:[],input:""},a.getAllUsers=function(){v.a.get("".concat("https://exhibit-me.herokuapp.com","/users")).then((function(e){var t=e.data,n=t.map((function(e){return e.theme}));a.setState({users:t,selected:t,themes:n}),a.handleSearch()})).catch((function(e){return console.log(e)}))},a.componentDidMount=function(){return L.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.awrap(a.getAllUsers());case 2:window.scrollTo(0,0);case 3:case"end":return e.stop()}}))},a.filterUsers=function(e){console.log(e);var t=a.state.users.filter((function(t){return t.username.toLowerCase().includes(e.toLowerCase())||t.theme.toLowerCase().includes(e.toLowerCase())||t.space_name.toLowerCase().includes(e.toLowerCase())}));t.length>0&&a.setState({selected:t})},a.handleSearch=function(){var e=D.a.parse(a.props.location.search);console.log(e),e.search&&a.filterUsers(e.search)},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){e.location.search!==this.props.location.search&&(console.log("updated"),this.handleSearch())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.04)",padding:"1.2em 2em",minHeight:"90vh"}},r.a.createElement("h1",{style:{textAlign:"left",fontSize:"40px",margin:"0.9em auto 0.5em auto",width:"77%",paddingLeft:"1em",paddingBottom:"0.3em"}},"Discover"),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"none"}},r.a.createElement(A,null)),this.state.selected.map((function(e){return r.a.createElement("div",{key:e._id,className:"one-user"},r.a.createElement(f.b,{to:"/".concat(e._id)},r.a.createElement("div",{style:{width:"85%",fontSize:"22px",margin:"0.5em auto",borderBottom:"1px solid grey",textAlign:"center",paddingBottom:"3.5em"}},r.a.createElement("h1",null,e.space_name," "),r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:"0.5em auto",fontSize:"15px",textAlign:"center"}},"Theme:",e.theme,r.a.createElement("br",null),"Created By ",e.username),r.a.createElement("div",{className:"containers"},r.a.createElement("img",{src:"/images/"+e.theme+".jpg",style:{display:"block",width:"100%",height:"auto",margin:"0 auto"},alt:"background"}),r.a.createElement("div",{className:"overlay"},"Explore ",e.space_name))))))})))),r.a.createElement("footer",null,"Rose Beatty 2020"))}}]),t}(n.Component)),I=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={theme:a.props.user.theme,backgroundPath:"/images/".concat(a.props.user.theme,".jpg")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"vrscene"},r.a.createElement("div",{id:"myEmbeddedScene"},r.a.createElement(N.Scene,{id:"scene",embedded:!0},r.a.createElement("a-assets",{id:"assets-id"},r.a.createElement("img",{alt:"background-img",id:"sky",src:this.state.backgroundPath})),r.a.createElement("a-camera",{position:"40 10 0"}),r.a.createElement("a-sky",{src:"#sky"}))))}}]),t}(n.Component)),U=a(40),M=a(41),T=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={input:""},a.handleInput=function(e){var t=e.target.value;a.setState({input:t})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.getPathname,n=a.state.input;v.a.post("".concat("https://exhibit-me.herokuapp.com","/comments/create/").concat(t),{comment:n,userId:t}).then((function(e){a.props.getComments()})).catch((function(e){console.log(e)}))},a.cancelComment=function(e){return e.preventDefault(),a.setState({input:""}),!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getComments()}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"create-comment",className:"hidden"}),r.a.createElement("input",{id:"create-comment",onChange:this.handleInput,type:"text",value:this.state.input,placeholder:"Add a public comment..."}),r.a.createElement("button",{className:"comments-btns",onClick:this.cancelComment},"CANCEL"),r.a.createElement("button",{className:"comments-btns"},"COMMENT"))}}]),t}(n.Component)),F=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],input:"",commentId:[],initialComments:[],canDelete:!0,comment:[]},a.componentDidMount=function(){a.getComments()},a.getComments=function(){var e;return L.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.props.user._id,console.log(a.props),t.next=4,L.a.awrap(v.a.get("".concat("https://exhibit-me.herokuapp.com","/comments/").concat(e)).then((function(e){var t=e.data;a.setState({initialComments:t.comments})})).then((function(e){a.findCommon()})).catch((function(e){console.log(e)})));case 4:case"end":return t.stop()}}))},a.findCommon=function(){var e=a.state.initialComments;v.a.get("".concat("https://exhibit-me.herokuapp.com","/comments")).then((function(t){var n=t.data,r=n.filter((function(t){return e.includes(t._id)})).map((function(e){return e})).reverse();a.setState({comment:r,comments:n})}))},a.deleteComment=function(e){var t=a.state.comment,n=e,r=t.filter((function(t){return t._id!==e}));v.a.delete("".concat("https://exhibit-me.herokuapp.com","/comments/delete/").concat(n)).then((function(e){a.setState({comment:r})})).catch((function(e){console.log(e)}))},a.commentTimeFromNow=function(e){var t=new Date,a=Math.round(Math.abs(t-new Date(e))/26298e5),n=Math.round((t-new Date(e))/864e5),r=Math.round(Math.abs(t-new Date(e))/36e5),o=Math.round(Math.abs(t-new Date(e))/6e4);return 1===a?a+" month ago":a>1?a+" months ago":1===n?n+" day ago":n>1?n+" days ago":1===r?r+" hour ago":r>1?r+" hours ago":1===o?o+"minute ago":o>1?o+" minutes ago":"1 minute ago"},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.comment,a=t;return r.a.createElement("div",null,r.a.createElement("div",{id:"comments-wrapper"},r.a.createElement("h3",null,a.length," Comments"),r.a.createElement("div",{className:"comment"},r.a.createElement(T,{getPathname:this.props.user._id,getComments:this.getComments}),r.a.createElement("div",null,Object(M.a)(t).map((function(t,a){return r.a.createElement("div",{key:t._id,className:"comment"},r.a.createElement("h3",null,t.comment),r.a.createElement("h6",{style:{paddingTop:"0.5em"}},e.commentTimeFromNow(t.created_at)),r.a.createElement("img",{style:{marginTop:"-1.5em",marginBottom:"0.5em",height:"5.0vh",display:"block",cursor:"pointer"},alt:"delete",src:"trash.png",id:"delete-btn",className:"comments-btns",onClick:function(a){return e.deleteComment(t._id)}}),r.a.createElement("hr",null))}))))))}}]),t}(n.Component)),P=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",space_name:"",theme:"",comments:[],file:null,fileName:"",objects:[]},a.onChangeHandler=function(e){a.setState({file:e.target.files[0]})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.user._id,n=a.state.file;if(n){var r=new FormData;r.append("file",n);v.a.post("".concat("https://exhibit-me.herokuapp.com","/users/upload/").concat(t),r,{headers:{"content-type":"multipart/form-data"}}).then((function(e){alert("The file was successfully uploaded");var t=a.fileUpload.files[0];a.setState((function(a){return Object(U.a)({},a,{fileName:t.name,objects:e.data.objects})})),a.uploadFile()})).catch((function(e){console.log(e)}))}},a.uploadFile=function(){var e=a.state.fileName,t=document.createElement("a-asset-item");t.setAttribute("src","".concat("https://exhibit-me.herokuapp.com","/images/")+e),t.setAttribute("id",e),document.getElementById("assets-id").appendChild(t);var n="#"+t.id,r=document.createElement("a-entity");r.setAttribute("gltf-model",n),r.setAttribute("id","rig"),r.setAttribute("wasd-controls"),r.setAttribute("wasd-controls","acceleration:5005"),r.setAttribute("look-controls"),document.getElementById("scene").appendChild(r)},a.showForm=function(e){e.preventDefault(),document.getElementById("edit-profile-form").style.display="block",document.getElementById("user-details").style.display="none"},a.showCreateButton=function(){document.getElementById("create-btn").style.display="block",document.getElementById("upload").style.display="none"},a.showUpload=function(e){e.preventDefault(),document.getElementById("upload").style.display="block",document.getElementById("create-btn").style.display="none"},a.handleInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a.editProfile=function(e){e.preventDefault(),document.getElementById("edit-profile-form").style.display="none",document.getElementById("user-details").style.display="block";var t=a.state,n=t.username,r=t.email,o=t.space_name,c=t.theme,s=a.props.user._id;v.a.put("".concat("https://exhibit-me.herokuapp.com","/users/update/").concat(s),{username:n,email:r,space_name:o,theme:c}).then((function(e){a.setState({username:n,email:r,space_name:o,theme:c})})).catch((function(e){console.log(e)}))},a.deleteObject=function(){var e=a.state.objects.pop();v.a.delete("".concat("https://exhibit-me.herokuapp.com","/users/deleteObject/").concat(e)).then((function(e){document.getElementById("rig").remove(),a.setState({fileName:null,file:null})})).catch((function(e){console.log(e)}))},a.componentDidMount=function(){var e=a.props.user._id;v.a.get("".concat("https://exhibit-me.herokuapp.com","/users/").concat(e)).then((function(e){var t=e.data;a.setState({username:t.username,email:t.email,space_name:t.space_name,theme:t.theme,comments:t.comments})})).catch((function(e){console.log(e)}))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=null!==this.state.file;return r.a.createElement("div",{id:"profile-wrapper"},r.a.createElement("div",{className:"container env"},r.a.createElement("div",{className:"profile-details extra-details"},r.a.createElement("h1",{id:"space-name"},this.state.space_name),r.a.createElement("div",{id:"user-details"},r.a.createElement("h3",null,"Username: ",r.a.createElement("span",null,this.state.username)," "),r.a.createElement("h3",null,"Email: ",r.a.createElement("span",null,this.state.email)),r.a.createElement("h3",null,"Theme: ",r.a.createElement("span",null,this.state.theme)),r.a.createElement("div",null,r.a.createElement("div",{onClick:this.showForm},r.a.createElement("h2",{id:"edit-profile-btn"},"Edit Profile")))),r.a.createElement("form",{id:"edit-profile-form",onSubmit:this.editProfile,style:{paddingTop:"0"}},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",value:this.state.username,name:"username",onChange:this.handleInput}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",value:this.state.email,name:"email",onChange:this.handleInput}),r.a.createElement("label",null,"Space Name:"),r.a.createElement("input",{type:"text",value:this.state.space_name,name:"space_name",onChange:this.handleInput}),r.a.createElement("button",{id:"save-profile-btn"},"Save"))),r.a.createElement("button",{id:"create-btn",onClick:this.showUpload},"Create / Delete Object"),r.a.createElement("div",{className:"profile-details",id:"upload"},r.a.createElement("ul",{className:"env upload-obj"},r.a.createElement("li",null,r.a.createElement("h2",null,"Upload a 3D Object Into Your Space "),r.a.createElement("p",{style:{fontSize:"12px",marginBottom:"0.5em"}},"(glb format)"),r.a.createElement("form",{onSubmit:this.handleSubmit,encType:"multipart/form-data"},r.a.createElement("input",{onChange:this.onChangeHandler,type:"file",name:"file",ref:function(t){return e.fileUpload=t},style:{color:"black",backgroundColor:"white",margin:"0 auto",width:"70%"}}),r.a.createElement("button",{id:"save-object-btn",onClick:this.showCreateButton,type:"submit",value:"upload",disabled:!t},"Save")),r.a.createElement("button",{style:{border:"1px solid white",color:"white",backgroundColor:"#2ab193e5",width:"40%",textAlign:"center",padding:"0.6em",margin:"1em auto",cursor:"pointer"},onClick:this.deleteObject},"Delete current object"))))),r.a.createElement(F,{comments:this.state.comments}))}}]),t}(n.Component)),R=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],username:"",space_name:"",theme:"",background_image:"",backgroundPath:""},a.getAllUsers=function(){v.a.get("".concat("https://exhibit-me.herokuapp.com","/users")).then((function(e){var t=e.data,n=t.map((function(e){return e.theme}));a.setState({users:t,selected:t,themes:n})})).catch((function(e){return console.log(e)}))},a.filterUsers=function(e){var t=a.state.users.filter((function(t){return t.username.toLowerCase().includes(e.toLowerCase())||t.theme.toLowerCase().includes(e.toLowerCase())||t.space_name.toLowerCase().includes(e.toLowerCase())}));a.setState({selected:t})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user._id;v.a.get("".concat("https://exhibit-me.herokuapp.com","/users/").concat(t)).then((function(t){var a=t.data;e.setState({user:a,username:a.username,space_name:a.space_name,theme:a.theme,background_image:a.background}),e.getAllUsers()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.04)"}},r.a.createElement("div",{className:"vrscene-h1"},r.a.createElement("h1",{style:{marginTop:"0.5em"}},"Welcome back to ",this.state.space_name,", ",this.state.username)),r.a.createElement(I,{background:this.background}),r.a.createElement(P,null)),r.a.createElement("footer",null,r.a.createElement("p",null,"Rose Beatty 2020")))}}]),t}(n.Component)),W=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={user:[],comments:[],input:"",commentId:[],initialComments:[],userComments:[],theComments:[],userCom:[]},a.componentDidMount=function(){var e=a.props.getPathname;console.log(a.props),v.a.get("".concat("https://exhibit-me.herokuapp.com","/users/").concat(e)).then((function(e){a.setState({user:e,userComments:e.data})})).catch((function(e){console.log(e)})),a.getComments()},a.getComments=function(){var e;return L.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.props.getPathname,t.next=3,L.a.awrap(v.a.get("".concat("https://exhibit-me.herokuapp.com","/comments/").concat(e)).then((function(e){a.setState({userComments:e.data.comments}),a.findCommon()})).catch((function(e){console.log(e)})));case 3:case"end":return t.stop()}}))},a.findCommon=function(){var e;return L.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.state.userComments,t.next=3,L.a.awrap(v.a.get("".concat("https://exhibit-me.herokuapp.com","/comments")).then((function(t){var n=t.data.filter((function(t){return e.includes(t._id)})).map((function(e){return e})).reverse();a.setState({userCom:n})})));case 3:case"end":return t.stop()}}))},a.commentTimeFromNow=function(e){var t=new Date,a=Math.round(Math.abs(t-new Date(e))/26298e5),n=Math.round((t-new Date(e))/864e5),r=Math.round(Math.abs(t-new Date(e))/36e5),o=Math.round(Math.abs(t-new Date(e))/6e4);return 1===a?a+" month ago":a>1?a+" months ago":1===n?n+" day ago":n>1?n+" days ago":1===r?r+" hour ago":r>1?r+" hours ago":1===o?o+"minute ago":o>1?o+" minutes ago":"1 minute ago"},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.userCom;return r.a.createElement("div",null,r.a.createElement("div",{id:"comments-wrapper"},r.a.createElement("h3",null,t.length," Comments"),r.a.createElement("div",{className:"comment"},r.a.createElement(T,{getPathname:this.props.getPathname.slice(1),getComments:this.getComments}),r.a.createElement("div",null,t.map((function(t,a){return r.a.createElement("div",{key:t._id,className:"comment"},r.a.createElement("h3",null,t.comment),r.a.createElement("h6",{style:{paddingTop:"0.5em"}},e.commentTimeFromNow(t.created_at)),r.a.createElement("hr",null))}))))))}}]),t}(n.Component)),z=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],user:[],fileName:"",objects:[],file:null,objectId:"",theme:"",selected:[],space_name:"",userpath:a.props.location.pathname},a.uploadFile=function(){var e=a.state.fileName,t=document.createElement("a-asset-item");t.setAttribute("src","".concat("https://exhibit-me.herokuapp.com","/images/")+e),t.setAttribute("id",e),document.getElementById("assets-id").appendChild(t);var n="#"+t.id,r=document.createElement("a-entity");r.setAttribute("gltf-model",n),r.setAttribute("id","rig"),r.setAttribute("wasd-controls"),r.setAttribute("wasd-controls","acceleration:5005"),r.setAttribute("look-controls"),document.getElementById("scene").appendChild(r)},a.componentDidMount=function(){var e=a.props.match.params.id;v.a.get("".concat("https://exhibit-me.herokuapp.com","/users/").concat(e)).then((function(e){var t=e.data;a.setState({user:t,theme:t.theme,space_name:t.space_name,username:t.username,objects:t.objects})})).catch((function(e){console.log(e)})),a.getAllUsers()},a.loadFile=function(e){return L.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.awrap(v.a.get("".concat("https://exhibit-me.herokuapp.com","/users/filename/").concat(e)).then((function(e){a.setState({fileName:e.data.path})})).catch((function(e){console.log(e)})));case 2:case"end":return t.stop()}}))},a.getFile=function(){var e=a.state.objects,t=e.pop();if(e.length>0)return a.loadFile(t)},a.getAllUsers=function(){v.a.get("".concat("https://exhibit-me.herokuapp.com","/users")).then((function(e){var t=e.data;a.setState({users:t,selected:t})})).catch((function(e){return console.log(e)}))},a.filterUsers=function(e){var t=a.state.users.filter((function(t){return t.username.toLowerCase().includes(e.toLowerCase())||t.theme.toLowerCase().includes(e.toLowerCase())||t.space_name.toLowerCase().includes(e.toLowerCase())}));a.setState({selected:t})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"hover"},r.a.createElement("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.04)"}},r.a.createElement("h2",{style:{padding:"1em 0 0.5em 0"}},"Welcome to ",this.state.user.username,"'s Space"," "),r.a.createElement(A,{startVR:this.startVR,getFile:this.getFile,uploadFile:this.uploadFile,theme:this.state.theme,objects:this.state.objects}),r.a.createElement(W,{getPathname:this.state.userpath})),r.a.createElement("footer",null,r.a.createElement("p",null,"Rose Beatty 2020")))}}]),t}(n.Component)),H=j(function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],input:"",selected:[],themes:[],selectedThemes:[],referrer:""},a.handleSearch=function(e){var t=e.target.value;a.setState({input:t})},a.searchSubmit=function(e){a.props.submit(e,a.state.input),a.setState({input:""})},a.goHome=function(){a.setState({referrer:"/"})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"nav-item",style:{display:"flex"}},r.a.createElement("form",{onSubmit:function(t){return e.searchSubmit(t)},id:"search-bar"},r.a.createElement("label",{htmlFor:"search-input",className:"hidden"}),r.a.createElement("input",{id:"search-input",type:"search",onChange:this.handleSearch,value:this.state.input,placeholder:"Search..."}),r.a.createElement("button",{type:"submit",id:"search-button"},"Search")))}}]),t}(n.Component)),V=j(function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.logout,a=e.isLoggedin;return r.a.createElement("div",null,a?r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark",id:"navbar"},r.a.createElement("span",{className:"navbar-brand"},r.a.createElement(f.b,{to:"/"},r.a.createElement("p",{id:"logo"},"Exhibit Me"))),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon",style:{color:"white"}})),r.a.createElement("div",{className:"collapse navbar-collapse flex-grow-1",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{id:"home",className:"nav-item"},r.a.createElement(f.b,{to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.b,{to:"/profile"},"Profile")),r.a.createElement(H,{submit:this.props.submit,filterUsers:this.props.filterUsers}),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{id:"logout-btn",onClick:t},"Logout"))))):r.a.createElement("nav",{className:"nav-style"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(f.b,{to:"/login"}," ",r.a.createElement("button",null,"Login")," ")),r.a.createElement("br",null),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/signup"}," ",r.a.createElement("button",{className:"logout-btn"},"Signup")," ")))))}}]),t}(n.Component)),J=a(19);var Y=j((function(e){var t=e.component,a=e.isLoggedin,n=e.isLoading,o=Object(J.a)(e,["component","isLoggedin","isLoading"]);return n?r.a.createElement("h1",null,"Loading"):r.a.createElement(p.b,Object.assign({},o,{render:function(e){return a?r.a.createElement(p.a,{to:"/"}):r.a.createElement(t,e)}}))}));var G=j((function(e){var t=e.component,a=e.isLoggedin,n=e.isLoading,o=Object(J.a)(e,["component","isLoggedin","isLoading"]);return n?r.a.createElement("h1",null,"Loading"):r.a.createElement(p.b,Object.assign({},o,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))})),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).submitSearch=function(e,t){e.preventDefault(),a.props.history.push("/?search=".concat(t))},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(V,{submit:this.submitSearch}),r.a.createElement(p.d,null,r.a.createElement(Y,{exact:!0,path:"/signup",component:O}),r.a.createElement(Y,{exact:!0,path:"/login",component:S}),r.a.createElement(G,{exact:!0,path:"/",component:B}),r.a.createElement(G,{exact:!0,path:"/profile",component:R}),r.a.createElement(G,{exact:!0,path:"/:id",component:z})))}}]),t}(n.Component),$=Object(p.g)(K);c.a.render(r.a.createElement(f.a,null,r.a.createElement(k,null,r.a.createElement($,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");s?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}()},42:function(e,t,a){e.exports=a(123)},49:function(e,t,a){}},[[42,1,2]]]);
//# sourceMappingURL=main.0643b21a.chunk.js.map